<template>
  <button
    class="flex items-center justify-center w-8 h-8 border border-slate-500 dark:border-slate-200 rounded cursor-pointer hover:border-cyan-500 dark:hover:border-cyan-500 transition-colors"
    @click="toggleTheme"
  >
    <svg
      v-if="!isDarkTheme"
      width="18"
      height="18"
      viewBox="0 0 18 18"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <g clip-path="url(#clip0_1322_787)">
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M9 0C9.37279 0 9.675 0.302208 9.675 0.675V2.025C9.675 2.39779 9.37279 2.7 9 2.7C8.62721 2.7 8.325 2.39779 8.325 2.025V0.675C8.325 0.302208 8.62721 0 9 0ZM9 5.175C6.88751 5.175 5.175 6.88751 5.175 9C5.175 11.1125 6.88751 12.825 9 12.825C11.1125 12.825 12.825 11.1125 12.825 9C12.825 6.88751 11.1125 5.175 9 5.175ZM3.825 9C3.825 6.14193 6.14193 3.825 9 3.825C11.8581 3.825 14.175 6.14193 14.175 9C14.175 11.8581 11.8581 14.175 9 14.175C6.14193 14.175 3.825 11.8581 3.825 9ZM9.675 15.975C9.675 15.6022 9.37279 15.3 9 15.3C8.62721 15.3 8.325 15.6022 8.325 15.975V17.325C8.325 17.6978 8.62721 18 9 18C9.37279 18 9.675 17.6978 9.675 17.325V15.975ZM15.3 9C15.3 8.62721 15.6022 8.325 15.975 8.325H17.325C17.6978 8.325 18 8.62721 18 9C18 9.37279 17.6978 9.675 17.325 9.675H15.975C15.6022 9.675 15.3 9.37279 15.3 9ZM0.675 8.325C0.302208 8.325 0 8.62721 0 9C0 9.37279 0.302208 9.675 0.675 9.675H2.025C2.39779 9.675 2.7 9.37279 2.7 9C2.7 8.62721 2.39779 8.325 2.025 8.325H0.675ZM2.6187 2.61865C2.88231 2.35505 3.30969 2.35505 3.5733 2.61865L4.5273 3.57265C4.7909 3.83625 4.7909 4.26364 4.5273 4.52724C4.2637 4.79085 3.83631 4.79085 3.57271 4.52724L2.61871 3.57324C2.3551 3.30964 2.3551 2.88225 2.6187 2.61865ZM14.4273 13.4727C14.1637 13.2091 13.7363 13.2091 13.4727 13.4727C13.2091 13.7363 13.2091 14.1637 13.4727 14.4273L14.4267 15.3813C14.6903 15.6449 15.1177 15.6449 15.3813 15.3813C15.6449 15.1177 15.6449 14.6903 15.3813 14.4267L14.4273 13.4727ZM15.3813 2.61865C15.6449 2.88225 15.6449 3.30964 15.3813 3.57324L14.4273 4.52724C14.1637 4.79085 13.7363 4.79085 13.4727 4.52724C13.2091 4.26364 13.2091 3.83625 13.4727 3.57265L14.4267 2.61865C14.6903 2.35505 15.1177 2.35505 15.3813 2.61865ZM4.5273 14.4273C4.7909 14.1637 4.7909 13.7363 4.5273 13.4727C4.2637 13.2091 3.83631 13.2091 3.57271 13.4727L2.61871 14.4267C2.3551 14.6903 2.3551 15.1177 2.6187 15.3813C2.88231 15.6449 3.30969 15.6449 3.5733 15.3813L4.5273 14.4273Z"
          fill="#111827"
        />
      </g>
      <defs>
        <clipPath id="clip0_1322_787">
          <rect width="18" height="18" fill="white" />
        </clipPath>
      </defs>
    </svg>

    <svg
      v-else
      class="w-4 h-4 fill-current text-slate-200"
      viewBox="0 0 14 14"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <g clip-path="url(#clip0_1321_1081)">
        <path
          d="M7.07306 14C6.77162 14 6.46775 13.9822 6.16146 13.9434C3.01851 13.5507 0.450968 10.9831 0.0573924 7.83856C-0.403261 4.15737 1.97112 0.797836 5.58038 0.0236155C5.97396 -0.0620499 6.3643 0.0890768 6.60029 0.416383C6.84031 0.749347 6.8589 1.19384 6.64878 1.54862C6.14933 2.39234 5.96265 3.36052 6.11054 4.3481C6.38127 6.16162 7.83758 7.61874 9.65191 7.88947C10.6395 8.03979 11.6069 7.85149 12.4514 7.35124C12.8054 7.14111 13.2507 7.1597 13.5836 7.40054C13.9101 7.63571 14.0613 8.02605 13.9764 8.42044C13.2668 11.7291 10.3841 14 7.07306 14ZM5.39612 1.31991C2.65483 2.12807 0.897883 4.78774 1.26075 7.68824C1.58644 10.2905 3.7111 12.4152 6.31258 12.7401C9.21389 13.1021 11.8727 11.346 12.6809 8.60389C11.6893 9.0896 10.5878 9.25527 9.47331 9.0896C7.1361 8.73966 5.26035 6.86391 4.91203 4.5267C4.74474 3.40982 4.91203 2.31072 5.39612 1.31991Z"
        />
      </g>
      <defs>
        <clipPath id="clip0_1321_1081">
          <rect width="14" height="14" fill="white" />
        </clipPath>
      </defs>
    </svg>
  </button>
</template>

<script setup>
import { ref, onMounted } from 'vue'

const isDarkTheme = ref(false)

onMounted(() => {
  let savedTheme = localStorage.getItem('theme')
  if (!savedTheme) {
    const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)')
    savedTheme = prefersDarkScheme.matches ? 'dark' : 'light'
    localStorage.setItem('theme', savedTheme)
  }
  isDarkTheme.value = savedTheme === 'dark'
  document.documentElement.classList.toggle('dark', isDarkTheme.value)
})

const toggleTheme = () => {
  isDarkTheme.value = !isDarkTheme.value
  document.documentElement.classList.toggle('dark', isDarkTheme.value)
  localStorage.setItem('theme', isDarkTheme.value ? 'dark' : 'light')
}
</script>
